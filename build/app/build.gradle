apply plugin: 'com.android.application'
apply plugin: 'com.google.gms.google-services'

android {
    compileSdkVersion 32

    defaultConfig {
        applicationId "top.winner777.com"
        minSdkVersion 26
        targetSdkVersion 30
        versionCode 1
        versionName "1.0"
        multiDexEnabled true
        //testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        flavorDimensions "default"

        ndk {
            abiFilters("armeabi-v7a")
        }
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }

    //使用uniapp时，需复制下面代码
    aaptOptions {
        additionalParameters '--auto-add-overlay'
        //noCompress 'foo', 'bar'
        ignoreAssetsPattern "!.svn:!.git:.*:!CVS:!thumbs.db:!picasa.ini:!*.scc:*~"
    }

    // 多渠道包配置
    productFlavors {
        // 正式包1
        p_relA {
            applicationId "top.winner777.com"
            versionCode 1
            versionName "03.0000.00"

            manifestPlaceholders = [
                    CHANNEL_VALUE: "rel",
                    SERVERID     : "serverRel1",
                    APPID        : "1000002",
            ]
        }
		
		// google包
		p_relG {
            applicationId "top.winner777.com"
            versionCode 1
            versionName "03.0000.00"
			ndk {
                abiFilters("armeabi-v7a", "arm64-v8a")
            }

            manifestPlaceholders = [
                    CHANNEL_VALUE: "rel_google",
                    SERVERID     : "serverRel1",
                    APPID        : "1000002",
            ]
        }

        // 内网测试包
        p_debug {
            applicationId "top.winner777.com"
            versionCode 1
            versionName "03.0000.00"

            manifestPlaceholders = [
                    CHANNEL_VALUE: "debug",
                    SERVERID     : "serverDebug1",
                    APPID        : "1000002",
            ]
        }
    }
}

android.applicationVariants.all { variant ->
    // 编译完后，apk的名字
    variant.outputs.all { output ->
        variant.productFlavors.each { flavor ->
            def project = "idnbet8"
            def separator = "_"
            def buildType = variant.variantData.variantConfiguration.buildType.name
            def versionName = variant.versionName
            def versionCode = variant.versionCode
            def date = new Date()
            def formattedDate = date.format('yyyyMMdd')

            def apkName = project + separator + "v" + versionName + separator + versionCode + separator + buildType + separator + flavor.name + separator + formattedDate + ".apk"
            output.outputFileName = apkName
        }
    }
}

dependencies {
    //implementation fileTree(dir: "libs", include: ["*.jar"])
    implementation fileTree(dir: 'libs', include: ['*.aar', '*.jar'], exclude: [])
    implementation 'androidx.appcompat:appcompat:1.2.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.0.1'
    //testImplementation 'junit:junit:4.12'
    //androidTestImplementation 'androidx.test.ext:junit:1.1.1'
    //androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'

    //noinspection GradleCompatible
    implementation 'com.android.support:appcompat-v7:26.1.0'
    implementation 'com.android.support.constraint:constraint-layout:1.1.3'
    /*uniapp所需库-----------------------开始*/
    //noinspection GradleCompatible
    implementation 'com.android.support:recyclerview-v7:26.1.0'
    implementation 'com.facebook.fresco:fresco:1.13.0'
    implementation "com.facebook.fresco:animated-gif:1.13.0"
    /*uniapp所需库-----------------------结束*/
    // 基座需要，必须添加
    implementation 'com.github.bumptech.glide:glide:4.9.0'
    implementation 'com.alibaba:fastjson:1.1.46.android'
	
	// implementation 'com.github.nostra13:Android-Universal-Image-Loader:f6a9615868482672c3630cb7db6dcf43391e80de'

    //------------------------------------------------------------------------------
    //implementation platform('com.google.firebase:firebase-bom:30.5.0')

    implementation 'com.google.firebase:firebase-analytics:17.2.2'
	implementation 'com.google.firebase:firebase-firestore:21.4.0'
	implementation 'com.google.firebase:firebase-auth:19.2.0'
	implementation 'com.google.android.gms:play-services-auth:20.4.0'
	
    implementation 'com.github.livechat:chat-window-android:v2.1.5'
	
    // facebook
    implementation 'com.facebook.android:facebook-android-sdk:12.3.0'
    
    // adjust
    implementation 'com.adjust.sdk:adjust-android:4.32.0'
    implementation 'com.android.installreferrer:installreferrer:2.2'
    // Add the following if you are using the Adjust SDK inside web views on your app
    implementation 'com.adjust.sdk:adjust-android-webbridge:4.32.0'
    implementation 'com.google.android.gms:play-services-ads-identifier:17.0.1'
    implementation 'com.android.installreferrer:installreferrer:2.2'

}